(()=>{"use strict";const e=(e,p,y)=>{const s=document.createElement("ul");return s.classList.add("keyboard__row"),((e,p,y)=>{const s=[];return y.forEach((y=>{s.push(new class{constructor({en:e,ru:p,code:y,cssClass:s},i="en"){this.enKey=e.key,this.enKeyUpper=e.keyUpper,this.enUpperVisible=e.visibleKeyUpper,this.ruKey=p.key,this.ruKeyUpper=p.keyUpper,this.ruUpperVisible=p.visibleKeyUpper,this.code=y,this.cssClass=s,this.lang=i}generateKey(){const e=document.createElement("li");if(e.id=this.code,e.className=this.cssClass.join(" "),"en"===this.lang){if(this.enUpperVisible){const p=document.createElement("span");p.className="key__upper",p.innerHTML=this.enKeyUpper,e.append(p)}const p=this.enKey;e.append(p)}else{if(this.ruUpperVisible){const p=document.createElement("span");p.className="key__upper",p.innerHTML=this.ruKeyUpper,e.append(p)}const p=this.ruKey;e.append(p)}return e}}(e[y],p))})),s})(e,p,y).forEach((e=>{s.append(e.generateKey())})),s},p=function(p,y){const s=Object.keys(p),i=document.createElement("section");i.classList.add("keyboard");const r=e(p,y,s.slice(0,14)),t=e(p,y,s.slice(14,28)),o=e(p,y,s.slice(28,41)),l=e(p,y,s.slice(41,54)),k=e(p,y,s.slice(54,63));return i.append(r),i.append(t),i.append(o),i.append(l),i.append(k),i},y=function(e,y,s){const i=document.createElement("main");i.classList.add("wrapper");const r=function(){const e=document.createElement("section"),p=document.createElement("textarea");return p.classList.add("textarea"),p.id="textarea",p.rows=6,p.autofocus=!0,e.append(p),e}(),t=p(y,s),o=function(e){const p=document.createElement("section"),y=document.createElement("p");return y.classList.add("description"),y.innerHTML=e,p.append(y),p}(e);return i.append(r),i.append(t),i.append(o),i},s={title:{en:"RSS virtual keyboard",ru:"RSS виртуальная клавиатура"},description:{en:"This keyboard designed to OS Windows. To switch between keyboard layouts, press Alt+Shift.",ru:"Клавиатура разработана для OS Windows. Для переключения расскладки, нажмите Alt+Shift."}},i={Backquote:{en:{key:"`",keyUpper:"~",visibleKeyUpper:!0},ru:{key:"ё",keyUpper:"Ё",visibleKeyUpper:!1},code:"Backquote",location:0,cssClass:["key"]},Digit1:{en:{key:"1",keyUpper:"!",visibleKeyUpper:!0},ru:{key:"1",keyUpper:"!",visibleKeyUpper:!0},code:"Digit1",location:0,cssClass:["key"]},Digit2:{en:{key:"2",keyUpper:"@",visibleKeyUpper:!0},ru:{key:"2",keyUpper:'"',visibleKeyUpper:!0},code:"Digit2",location:0,cssClass:["key"],visibleKeyUpper:!0},Digit3:{en:{key:"3",keyUpper:"#",visibleKeyUpper:!0},ru:{key:"3",keyUpper:"№",visibleKeyUpper:!0},code:"Digit3",location:0,cssClass:["key"]},Digit4:{en:{key:"4",keyUpper:"$",visibleKeyUpper:!0},ru:{key:"4",keyUpper:";",visibleKeyUpper:!0},code:"Digit4",location:0,cssClass:["key"],visibleKeyUpper:!0},Digit5:{en:{key:"5",keyUpper:"%",visibleKeyUpper:!0},ru:{key:"5",keyUpper:"%",visibleKeyUpper:!0},code:"Digit5",location:0,cssClass:["key"]},Digit6:{en:{key:"6",keyUpper:"^",visibleKeyUpper:!0},ru:{key:"6",keyUpper:":",visibleKeyUpper:!0},code:"Digit6",location:0,cssClass:["key"]},Digit7:{en:{key:"7",keyUpper:"&",visibleKeyUpper:!0},ru:{key:"7",keyUpper:"?",visibleKeyUpper:!0},code:"Digit7",location:0,cssClass:["key"]},Digit8:{en:{key:"8",keyUpper:"*",visibleKeyUpper:!0},ru:{key:"8",keyUpper:"*",visibleKeyUpper:!0},code:"Digit8",location:0,cssClass:["key"]},Digit9:{en:{key:"9",keyUpper:"(",visibleKeyUpper:!0},ru:{key:"9",keyUpper:"(",visibleKeyUpper:!0},code:"Digit9",location:0,cssClass:["key"]},Digit0:{en:{key:"0",keyUpper:")",visibleKeyUpper:!0},ru:{key:"0",keyUpper:")",visibleKeyUpper:!0},code:"Digit0",location:0,cssClass:["key"]},Minus:{en:{key:"-",keyUpper:"_",visibleKeyUpper:!0},ru:{key:"-",keyUpper:"_",visibleKeyUpper:!0},code:"Minus",location:0,cssClass:["key"]},Equal:{en:{key:"=",keyUpper:"+",visibleKeyUpper:!0},ru:{key:"=",keyUpper:"+",visibleKeyUpper:!0},code:"Equal",location:0,cssClass:["key"]},Backspace:{en:{key:"Backspace",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Backspace",keyUpper:"",visibleKeyUpper:!1},code:"Backspace",location:0,cssClass:["key","key_control"]},Tab:{en:{key:"Tab",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Tab",keyUpper:"",visibleKeyUpper:!1},code:"Tab",location:0,cssClass:["key","key_control"]},KeyQ:{en:{key:"q",keyUpper:"Q",visibleKeyUpper:!1},ru:{key:"й",keyUpper:"Й",visibleKeyUpper:!1},code:"KeyQ",location:0,cssClass:["key"]},KeyW:{en:{key:"w",keyUpper:"W",visibleKeyUpper:!1},ru:{key:"ц",keyUpper:"Ц",visibleKeyUpper:!1},code:"KeyW",location:0,cssClass:["key"]},KeyE:{en:{key:"e",keyUpper:"E",visibleKeyUpper:!1},ru:{key:"у",keyUpper:"У",visibleKeyUpper:!1},code:"KeyE",location:0,cssClass:["key"]},KeyR:{en:{key:"r",keyUpper:"R",visibleKeyUpper:!1},ru:{key:"к",keyUpper:"К",visibleKeyUpper:!1},code:"KeyR",location:0,cssClass:["key"]},KeyT:{en:{key:"t",keyUpper:"T",visibleKeyUpper:!1},ru:{key:"е",keyUpper:"Е",visibleKeyUpper:!1},code:"KeyT",location:0,cssClass:["key"]},KeyY:{en:{key:"y",keyUpper:"Y",visibleKeyUpper:!1},ru:{key:"н",keyUpper:"Н",visibleKeyUpper:!1},code:"KeyY",location:0,cssClass:["key"]},KeyU:{en:{key:"u",keyUpper:"U",visibleKeyUpper:!1},ru:{key:"г",keyUpper:"Г",visibleKeyUpper:!1},code:"KeyU",location:0,cssClass:["key"]},KeyI:{en:{key:"i",keyUpper:"I",visibleKeyUpper:!1},ru:{key:"ш",keyUpper:"Ш",visibleKeyUpper:!1},code:"KeyI",location:0,cssClass:["key"]},KeyO:{en:{key:"o",keyUpper:"O",visibleKeyUpper:!1},ru:{key:"щ",keyUpper:"Щ",visibleKeyUpper:!1},code:"KeyO",location:0,cssClass:["key"]},KeyP:{en:{key:"p",keyUpper:"P",visibleKeyUpper:!1},ru:{key:"з",keyUpper:"З",visibleKeyUpper:!1},code:"KeyP",location:0,cssClass:["key"]},BracketLeft:{en:{key:"[",keyUpper:"{",visibleKeyUpper:!0},ru:{key:"х",keyUpper:"Х",visibleKeyUpper:!1},code:"BracketLeft",location:0,cssClass:["key"]},BracketRight:{en:{key:"]",keyUpper:"}",visibleKeyUpper:!0},ru:{key:"ъ",keyUpper:"Ъ",visibleKeyUpper:!1},code:"BracketRight",location:0,cssClass:["key"]},Backslash:{en:{key:"\\",keyUpper:"|",visibleKeyUpper:!0},ru:{key:"\\",keyUpper:"/",visibleKeyUpper:!0},code:"Backslash",location:0,cssClass:["key","key_control"]},CapsLock:{en:{key:"Caps Lock",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Caps Lock",keyUpper:"",visibleKeyUpper:!1},code:"CapsLock",location:0,cssClass:["key","key_control"]},KeyA:{en:{key:"a",keyUpper:"A",visibleKeyUpper:!1},ru:{key:"ф",keyUpper:"Ф",visibleKeyUpper:!1},code:"KeyA",location:0,cssClass:["key"]},KeyS:{en:{key:"s",keyUpper:"S",visibleKeyUpper:!1},ru:{key:"ы",keyUpper:"Ы",visibleKeyUpper:!1},code:"KeyS",location:0,cssClass:["key"]},KeyD:{en:{key:"d",keyUpper:"D",visibleKeyUpper:!1},ru:{key:"в",keyUpper:"В",visibleKeyUpper:!1},code:"KeyD",location:0,cssClass:["key"]},KeyF:{en:{key:"f",keyUpper:"F",visibleKeyUpper:!1},ru:{key:"а",keyUpper:"В",visibleKeyUpper:!1},code:"KeyF",location:0,cssClass:["key"]},KeyG:{en:{key:"g",keyUpper:"G",visibleKeyUpper:!1},ru:{key:"п",keyUpper:"П",visibleKeyUpper:!1},code:"KeyG",location:0,cssClass:["key"]},KeyH:{en:{key:"h",keyUpper:"H",visibleKeyUpper:!1},ru:{key:"р",keyUpper:"Р",visibleKeyUpper:!1},code:"KeyH",location:0,cssClass:["key"]},KeyJ:{en:{key:"j",keyUpper:"J",visibleKeyUpper:!1},ru:{key:"о",keyUpper:"О",visibleKeyUpper:!1},code:"KeyJ",location:0,cssClass:["key"]},KeyK:{en:{key:"k",keyUpper:"K",visibleKeyUpper:!1},ru:{key:"л",keyUpper:"Л",visibleKeyUpper:!1},code:"KeyK",location:0,cssClass:["key"]},KeyL:{en:{key:"l",keyUpper:"L",visibleKeyUpper:!1},ru:{key:"д",keyUpper:"Д",visibleKeyUpper:!1},code:"KeyL",location:0,cssClass:["key"]},Semicolon:{en:{key:";",keyUpper:":",visibleKeyUpper:!0},ru:{key:"ж",keyUpper:"Ж",visibleKeyUpper:!1},code:"Semicolon",location:0,cssClass:["key"]},Quote:{en:{key:"'",keyUpper:'"',visibleKeyUpper:!0},ru:{key:"э",keyUpper:"Э",visibleKeyUpper:!1},code:"Quote",location:0,cssClass:["key"]},Enter:{en:{key:"Enter",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Enter",keyUpper:"",visibleKeyUpper:!1},code:"Enter",location:0,cssClass:["key","key_control"]},ShiftLeft:{en:{key:"Shift",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Shift",keyUpper:"",visibleKeyUpper:!1},code:"ShiftLeft",location:1,cssClass:["key","key_control"]},KeyZ:{en:{key:"z",keyUpper:"Z",visibleKeyUpper:!1},ru:{key:"я",keyUpper:"Я",visibleKeyUpper:!1},code:"KeyZ",location:0,cssClass:["key"]},KeyX:{en:{key:"x",keyUpper:"X",visibleKeyUpper:!1},ru:{key:"ч",keyUpper:"Ч",visibleKeyUpper:!1},code:"KeyX",location:0,cssClass:["key"]},KeyC:{en:{key:"c",keyUpper:"C",visibleKeyUpper:!1},ru:{key:"с",keyUpper:"С",visibleKeyUpper:!1},code:"KeyC",location:0,cssClass:["key"]},KeyV:{en:{key:"v",keyUpper:"V",visibleKeyUpper:!1},ru:{key:"м",keyUpper:"М",visibleKeyUpper:!1},code:"KeyV",location:0,cssClass:["key"]},KeyB:{en:{key:"b",keyUpper:"B",visibleKeyUpper:!1},ru:{key:"и",keyUpper:"И",visibleKeyUpper:!1},code:"KeyB",location:0,cssClass:["key"]},KeyN:{en:{key:"n",keyUpper:"N",visibleKeyUpper:!1},ru:{key:"т",keyUpper:"Т",visibleKeyUpper:!1},code:"KeyN",location:0,cssClass:["key"]},KeyM:{en:{key:"m",keyUpper:"M",visibleKeyUpper:!1},ru:{key:"ь",keyUpper:"Ь",visibleKeyUpper:!1},code:"KeyM",location:0,cssClass:["key"]},Comma:{en:{key:",",keyUpper:"<",visibleKeyUpper:!0},ru:{key:"б",keyUpper:"Б",visibleKeyUpper:!1},code:"Comma",location:0,cssClass:["key"]},Period:{en:{key:".",keyUpper:">",visibleKeyUpper:!0},ru:{key:"ю",keyUpper:"Ю",visibleKeyUpper:!1},code:"Period",location:0,cssClass:["key"]},Slash:{en:{key:"/",keyUpper:"?",visibleKeyUpper:!0},ru:{key:".",keyUpper:",",visibleKeyUpper:!0},code:"Slash",location:0,cssClass:["key"]},ArrowUp:{en:{key:"↑",keyUpper:"↑",visibleKeyUpper:!1},ru:{key:"↑",keyUpper:"↑",visibleKeyUpper:!1},code:"ArrowUp",location:0,cssClass:["key","key_control","key_arrow"]},ShiftRight:{en:{key:"Shift",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Shift",keyUpper:"",visibleKeyUpper:!1},code:"ShiftRight",location:2,cssClass:["key","key_control"]},ControlLeft:{en:{key:"Ctrl",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Ctrl",keyUpper:"",visibleKeyUpper:!1},code:"ControlLeft",location:1,cssClass:["key","key_control"]},MetaLeft:{en:{key:"Win",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Win",keyUpper:"",visibleKeyUpper:!1},code:"MetaLeft",location:1,cssClass:["key","key_control"]},AltLeft:{en:{key:"Alt",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Alt",keyUpper:"",visibleKeyUpper:!1},code:"AltLeft",location:1,cssClass:["key","key_control"]},Space:{en:{key:" ",keyUpper:" ",visibleKeyUpper:!1},ru:{key:" ",keyUpper:" ",visibleKeyUpper:!1},code:"Space",location:0,cssClass:["key","key_control","key_space"]},AltRight:{en:{key:"Alt",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Alt",keyUpper:"",visibleKeyUpper:!1},code:"AltRight",location:2,cssClass:["key","key_control"]},ArrowLeft:{en:{key:"←",keyUpper:"←",visibleKeyUpper:!1},ru:{key:"←",keyUpper:"←",visibleKeyUpper:!1},code:"ArrowLeft",location:0,cssClass:["key","key_control","key_arrow"]},ArrowDown:{en:{key:"↓",keyUpper:"↓",visibleKeyUpper:!1},ru:{key:"↓",keyUpper:"↓",visibleKeyUpper:!1},code:"ArrowDown",location:0,cssClass:["key","key_control","key_arrow"]},ArrowRight:{en:{key:"→",keyUpper:"→",visibleKeyUpper:!1},ru:{key:"→",keyUpper:"→",visibleKeyUpper:!1},code:"ArrowRight",location:0,cssClass:["key","key_control","key_arrow"]},ControlRight:{en:{key:"Ctrl",keyUpper:"",visibleKeyUpper:!1},ru:{key:"Ctrl",keyUpper:"",visibleKeyUpper:!1},code:"ControlRight",location:2,cssClass:["key","key_control"]}},r=e=>{if(Object.keys(i).includes(e)){const p=document.getElementById(e);"CapsLock"!==e?p.classList.add("key_activ"):p.classList.toggle("key_activ")}},t=e=>{if(Object.keys(i).includes(e)){const p=document.getElementById(e);"CapsLock"!==e&&p.classList.remove("key_activ")}},o=e=>{e.setSelectionRange(e.textContent.length,e.textContent.length),e.focus()},l=(e,p,y=!1)=>{if(Object.keys(i).includes(e)){const s=document.querySelector(".textarea");1!==i[e].cssClass.length&&3!==i[e].cssClass.length||(s.textContent+=y?i[e][p].keyUpper:i[e][p].key,o(s)),"Backspace"===e&&(s.textContent=s.textContent.slice(0,s.textContent.length-1),o(s)),"Tab"===e&&(s.textContent+="\t",o(s)),"Enter"===e&&(s.textContent+="\n",o(s)),"Backslash"===e&&(s.textContent+=y?i[e][p].keyUpper:i[e][p].key,o(s))}};window.onload=()=>{let e="en";localStorage.getItem("lang")&&(e=localStorage.getItem("lang")),document.body.classList.add("body");const o=function(e){const p=document.createElement("header");p.classList.add("wrapper");const y=document.createElement("h1");return y.classList.add("title"),y.innerHTML=e,p.append(y),p}(s.title[e]),k=y(s.description[e],i,e);document.body.append(o),document.body.append(k),document.addEventListener("keydown",(y=>{y.altKey&&y.shiftKey&&(e="en"===e?"ru":"en",localStorage.setItem("lang",e),(e=>{document.querySelector(".title").innerHTML=s.title[e],document.querySelector(".description").innerHTML=s.description[e],document.querySelector(".keyboard").innerHTML=p(i,e).innerHTML})(e)),r(y.code),y.shiftKey||document.getElementById("CapsLock").classList.contains("key_activ")?l(y.code,e,!0):l(y.code,e),y.preventDefault()})),document.addEventListener("keyup",(e=>{t(e.code)}));const c=document.querySelector(".keyboard");c.addEventListener("mousedown",(p=>{r(p.target.id),p.shiftKey||document.getElementById("CapsLock").classList.contains("key_activ")?l(p.target.id,e,!0):l(p.target.id,e),p.preventDefault()})),c.addEventListener("mouseup",(e=>{t(e.target.id)}))}})();